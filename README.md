<!--
 * @Date: 2025-08-18 16:40:59
 * @LastEditTimes: 2025-08-25
 * @Description: MCP Tool - æ¨¡å—åŒ–æ¶æ„çš„ MCP åè®®æµ‹è¯•å·¥å…·
-->

# MCP Tool

ä¸€ä¸ªåŸºäº [Next.js](https://nextjs.org) å’Œ [Model Context Protocol (MCP)](https://github.com/modelcontextprotocol/mcp) æ„å»ºçš„ç°ä»£åŒ–å·¥å…·ç®±ï¼Œæä¾›å®Œæ•´çš„ MCP åè®®åŠŸèƒ½æµ‹è¯•å’Œèœè°±ç®¡ç†ç³»ç»Ÿã€‚

## é¡¹ç›®ä»‹ç»

MCP Tool æ˜¯ä¸€ä¸ªé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡çš„ MCP åè®®äº¤äº’å¹³å°ï¼Œé›†æˆäº†åŸºç¡€å·¥å…·å’Œæ™ºèƒ½èœè°±ç³»ç»Ÿï¼Œä¸ºå¼€å‘è€…æä¾›å‹å¥½çš„ç”¨æˆ·ç•Œé¢æ¥æµ‹è¯•å’Œä½¿ç”¨ MCP åè®®çš„å„ç§åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„**: é‡‡ç”¨ç°ä»£åŒ–æ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- **ğŸ³ æ™ºèƒ½èœè°±ç³»ç»Ÿ**: é›†æˆçœŸå®èœè°±æ•°æ®æºï¼Œæä¾›æœç´¢ã€æ¨èã€æ™ºèƒ½æ­é…ã€é£ŸæåŒ¹é…ç­‰åŠŸèƒ½
- **âš¡ é«˜æ€§èƒ½ç¼“å­˜**: 30 åˆ†é’Ÿæ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œæå‡æ€§èƒ½åŒæ—¶å‡å°‘ API è°ƒç”¨
- **ğŸ”§ MCP Playground**: äº¤äº’å¼ç•Œé¢ï¼Œå®æ—¶æµ‹è¯• MCP å·¥å…·å’ŒåŠŸèƒ½
- **ğŸ“‹ å®Œæ•´å·¥å…·é›†**: 9 ä¸ªç²¾å¿ƒè®¾è®¡çš„ MCP å·¥å…·ï¼Œæ¶µç›–åŸºç¡€åŠŸèƒ½å’Œèœè°±ç®¡ç†
- **ğŸ¯ ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼Œç¡®ä¿ä»£ç è´¨é‡

### å·¥å…·åˆ—è¡¨

#### åŸºç¡€å·¥å…· (3 ä¸ª)

- **hello**: è¿”å›ä¸€æ®µé—®å€™è¯­
- **time**: è¿”å›å½“å‰æ—¶é—´
- **getAllWebsites**: è·å– [Dream-hub](https://dream-hub.myltx.top/) æ‰€æœ‰ç½‘ç«™ä¿¡æ¯

#### èœè°±å·¥å…· (6 ä¸ª)

- **searchRecipes**: æ ¹æ®èœåæœç´¢èœè°±ï¼Œè¿”å›å®Œæ•´èœè°±ä¿¡æ¯
- **randomRecipe**: éšæœºæ¨èèœè°±ï¼Œè§£å†³"ä»Šå¤©åƒä»€ä¹ˆ"çš„éš¾é¢˜
- **whatToEat**: æ™ºèƒ½æ¨èèœå“ç»„åˆï¼Œæ ¹æ®äººæ•°è‡ªåŠ¨é…ç½®è¤ç´ æ­é…ï¼Œè¿”å›å®Œæ•´èœè°±ä¿¡æ¯
- **findRecipesByIngredients**: æ ¹æ®ç°æœ‰é£ŸææŸ¥æ‰¾å¯åˆ¶ä½œçš„èœè°±
- **getRecipeDetail**: è·å–èœè°±çš„è¯¦ç»†åˆ¶ä½œæ­¥éª¤å’Œå®Œæ•´ä¿¡æ¯
- **getRecipeCategories**: è·å–æ‰€æœ‰èœè°±åˆ†ç±»å’Œç»Ÿè®¡ä¿¡æ¯

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 15 (App Router)
- **UI åº“**: React 19
- **æ ·å¼**: TailwindCSS 4
- **è¯­è¨€**: TypeScript
- **MCP åè®®**: @modelcontextprotocol/sdk v1.17.3
- **æ•°æ®æº**: [weilei.site](https://weilei.site/all_recipes.json) çœŸå®èœè°±æ•°æ®

## é¡¹ç›®æ¶æ„

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/mcp/route.ts   # MCP API è·¯ç”±å¤„ç†å™¨ (70è¡Œè½»é‡çº§)
â”‚   â”œâ”€â”€ mcp-test/page.tsx  # MCP Playground é¡µé¢
â”‚   â”œâ”€â”€ globals.css        # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx         # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ page.tsx           # é¦–é¡µç»„ä»¶
â””â”€â”€ lib/                   # æ¨¡å—åŒ–æ ¸å¿ƒåº“
    â”œâ”€â”€ constants/         # é…ç½®å¸¸é‡
    â”‚   â”œâ”€â”€ config.ts      # é¡¹ç›®é…ç½®
    â”‚   â””â”€â”€ index.ts       # ç»Ÿä¸€å¯¼å‡º
    â”œâ”€â”€ services/          # æ•°æ®æœåŠ¡å±‚
    â”‚   â”œâ”€â”€ recipe-service.ts  # èœè°±æ•°æ®æœåŠ¡
    â”‚   â””â”€â”€ index.ts       # ç»Ÿä¸€å¯¼å‡º
    â”œâ”€â”€ tools/             # MCPå·¥å…·å±‚
    â”‚   â”œâ”€â”€ basic-tools.ts     # åŸºç¡€å·¥å…·
    â”‚   â”œâ”€â”€ recipe-tools.ts    # èœè°±å·¥å…·
    â”‚   â””â”€â”€ index.ts       # ç»Ÿä¸€å¯¼å‡º
    â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
    â”‚   â”œâ”€â”€ mcp.ts         # MCPåè®®ç±»å‹
    â”‚   â”œâ”€â”€ recipe.ts      # èœè°±ç›¸å…³ç±»å‹
    â”‚   â””â”€â”€ index.ts       # ç»Ÿä¸€å¯¼å‡º
    â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
        â”œâ”€â”€ mcp-utils.ts   # MCPå·¥å…·å‡½æ•°
        â”œâ”€â”€ recipe-utils.ts # èœè°±å·¥å…·å‡½æ•°
        â””â”€â”€ index.ts       # ç»Ÿä¸€å¯¼å‡º
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js v20+
- npm / yarn / pnpm / bun

### å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
# æˆ–
bun install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
# æˆ–
bun dev
```

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š

- [http://localhost:3000](http://localhost:3000) - é¡¹ç›®é¦–é¡µ
- [http://localhost:3000/mcp-test](http://localhost:3000/mcp-test) - MCP Playground

## ä½¿ç”¨æŒ‡å—

### MCP Playground ä½¿ç”¨

1. è®¿é—® MCP Playground é¡µé¢
2. ä»å·¥å…·åˆ—è¡¨ä¸­é€‰æ‹©è¦æµ‹è¯•çš„å·¥å…·
3. åœ¨å‚æ•°è¾“å…¥åŒºåŸŸç¼–è¾‘ JSON æ ¼å¼çš„å‚æ•°
4. ç‚¹å‡»"æ‰§è¡Œ"æŒ‰é’®å‘é€è¯·æ±‚
5. åœ¨è¿”å›ç»“æœåŒºåŸŸæŸ¥çœ‹ API å“åº”

### èœè°±åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

```bash
# æœç´¢èœè°±
curl -X POST http://localhost:3000/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"method": "tools/execute", "params": {"name": "searchRecipes", "arguments": {"query": "é¸¡è›‹"}}, "id": 1}'

# éšæœºæ¨èèœè°±
curl -X POST http://localhost:3000/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"method": "tools/execute", "params": {"name": "randomRecipe", "arguments": {}}, "id": 2}'

# æ™ºèƒ½æ¨èèœå“ç»„åˆï¼ˆæ ¹æ®äººæ•°ï¼‰
curl -X POST http://localhost:3000/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"method": "tools/execute", "params": {"name": "whatToEat", "arguments": {"peopleCount": 4}}, "id": 3}'

# æ ¹æ®é£ŸææŸ¥æ‰¾èœè°±
curl -X POST http://localhost:3000/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"method": "tools/execute", "params": {"name": "findRecipesByIngredients", "arguments": {"ingredients": ["é¸¡è›‹", "è¥¿çº¢æŸ¿"]}}, "id": 4}'
```

## API æ¥å£

### MCP åè®®ç«¯ç‚¹

- **GET** `/api/mcp` - è·å– API çŠ¶æ€ä¿¡æ¯
- **POST** `/api/mcp` - æ‰§è¡Œ MCP åè®®è¯·æ±‚

### æ”¯æŒçš„æ–¹æ³•

- `tools/list` - è·å–æ‰€æœ‰å¯ç”¨å·¥å…·åˆ—è¡¨ (9 ä¸ªå·¥å…·)
- `tools/execute` - æ‰§è¡ŒæŒ‡å®šçš„å·¥å…·

### å“åº”æ¨¡å¼

æ”¯æŒä¸¤ç§å“åº”æ¨¡å¼ï¼š

- **ç®€å•æ¨¡å¼** (é»˜è®¤): `{"result": data}`
- **JSON-RPC æ¨¡å¼**: `{"jsonrpc": "2.0", "id": 1, "result": data}`

é€šè¿‡æŸ¥è¯¢å‚æ•° `?mode=rpc` åˆ‡æ¢åˆ° JSON-RPC æ¨¡å¼ã€‚

## æ„å»ºå’Œéƒ¨ç½²

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

```bash
npm start
```

### ä»£ç æ£€æŸ¥

```bash
npm run lint
```

### éƒ¨ç½²åˆ° Vercel

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fyourname%2Fmy-mcp-tool)

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/lib/tools/` ç›®å½•ä¸‹åˆ›å»ºå·¥å…·æ–‡ä»¶
2. å®ç° `ToolBase` æ¥å£
3. åœ¨ `src/lib/tools/index.ts` ä¸­å¯¼å‡ºæ–°å·¥å…·
4. å·¥å…·å°†è‡ªåŠ¨åœ¨ API ä¸­å¯ç”¨

### æ‰©å±•ç±»å‹å®šä¹‰

åœ¨ `src/lib/types/` ç›®å½•ä¸‹æ·»åŠ æ–°çš„ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œå¹¶åœ¨ `index.ts` ä¸­å¯¼å‡ºã€‚

### é…ç½®ç®¡ç†

é¡¹ç›®é…ç½®é›†ä¸­åœ¨ `src/lib/constants/config.ts` ä¸­ï¼ŒåŒ…æ‹¬ï¼š

- èœè°±æ•°æ®æº URL
- ç¼“å­˜æŒç»­æ—¶é—´
- API ç«¯ç‚¹é…ç½®

## ç‰¹æ€§è¯´æ˜

### æ™ºèƒ½æ¨èç®—æ³•

- **è¤ç´ æ­é…**: æ ¹æ®äººæ•°è‡ªåŠ¨è®¡ç®—è¤èœå’Œç´ èœæ•°é‡æ¯”ä¾‹
- **Fisher-Yates æ´—ç‰Œ**: ä½¿ç”¨ç»å…¸ç®—æ³•å®ç°çœŸæ­£éšæœºåŒ–æ¨è
- **æ™ºèƒ½ç­›é€‰**: è‡ªåŠ¨åˆ†ç±»è¤èœå’Œç´ èœï¼Œç¡®ä¿è¥å…»å‡è¡¡
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰å’Œå‚æ•°éªŒè¯

### æ™ºèƒ½ç¼“å­˜æœºåˆ¶

- **ç¼“å­˜æ—¶é•¿**: 30 åˆ†é’Ÿ
- **é™çº§ç­–ç•¥**: ç½‘ç»œå¼‚å¸¸æ—¶è‡ªåŠ¨ä½¿ç”¨ç¼“å­˜æ•°æ®
- **æ€§èƒ½ä¼˜åŒ–**: å‡å°‘é‡å¤ API è°ƒç”¨

### é”™è¯¯å¤„ç†

- å®Œå–„çš„å¼‚å¸¸æ•è·æœºåˆ¶
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•
- ä¼˜é›…çš„é”™è¯¯å“åº”

### ç±»å‹å®‰å…¨

- å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- å‚æ•°å®‰å…¨è§£æå‡½æ•°
- ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥

## äº†è§£æ›´å¤š

- [Next.js æ–‡æ¡£](https://nextjs.org/docs) - äº†è§£ Next.js ç‰¹æ€§å’Œ API
- [Model Context Protocol](https://github.com/modelcontextprotocol/mcp) - äº†è§£ MCP åè®®
- [TailwindCSS](https://tailwindcss.com) - äº†è§£æ ·å¼æ¡†æ¶
- [TypeScript](https://www.typescriptlang.org) - äº†è§£ç±»å‹ç³»ç»Ÿ

## æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-08-25)

- âœ¨ å…¨æ–°æ¨¡å—åŒ–æ¶æ„è®¾è®¡
- ğŸ³ é›†æˆå®Œæ•´èœè°±ç®¡ç†ç³»ç»Ÿ
- âš¡ å®ç°æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- ğŸ“ æ–°å¢ whatToEat æ™ºèƒ½æ¨èå·¥å…·ï¼Œæ”¯æŒæ ¹æ®äººæ•°è‡ªåŠ¨é…ç½®è¤ç´ æ­é…
- ğŸ”§ å¢åŠ  6 ä¸ªèœè°±ç›¸å…³å·¥å…·
- ğŸ“‹ å®Œå–„ TypeScript ç±»å‹å®šä¹‰
- ğŸ¯ ä¼˜åŒ– API è·¯ç”±å¤„ç†å™¨
